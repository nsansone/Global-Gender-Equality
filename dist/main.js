!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/dist/",a(a.s=1)}([function(t,e){function a(t){var e=20,a=30,n=30,r=40,o=400-r-a,s=220-e-n,i=d3.scale.ordinal().rangeRoundBands([0,o],.1),c=d3.scale.linear().range([s,0]),l=(d3.max(t),d3.svg.axis().scale(i).orient("bottom")),d=d3.svg.axis().scale(c).orient("left").ticks(10,"%"),p=d3.select(".chart").attr("width",o+r+a).attr("height",s+e+n).append("g").attr("transform","translate("+r+","+e+")");i.domain(t.map(function(t){return t.name})),c.domain([0,d3.max(t,function(t){return t.value})]),p.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(l),p.append("g").attr("class","y axis").call(d).append("text").attr("transform","rotate(-90)").attr("y",100).attr("dy",".71em").style("text-anchor","end"),p.selectAll(".bar").data(t).enter().append("rect").attr("class","bar").attr("x",function(t){return i(t.name)}).attr("y",function(t){return c(t.value)}).attr("height",function(t){return s-c(t.value)}).attr("width",i.rangeBand())}var n=.2,r=[{pct:0,color:{r:169,g:169,b:169}},{pct:.5,color:{r:128,g:128,b:128}},{pct:1,color:{r:0,g:0,b:0}}],o=function(t){for(var e=1;e<r.length-1;e++){if("-"===t)return"white";if(t<r[e].pct)break}var a=r[e-1],n=r[e],o=n.pct-a.pct,s=(t-a.pct)/o,i=1-s,c=s,l={r:Math.floor(a.color.r*i+n.color.r*c),g:Math.floor(a.color.g*i+n.color.g*c),b:Math.floor(a.color.b*i+n.color.b*c)};return"rgb("+[l.r,l.g,l.b].join(",")+")"},s=(o(.1),d3.geo.orthographic().scale(350).rotate([0,0]).translate([400,375]).clipAngle(90)),i=d3.geo.path().projection(s),c=d3.select(".globe");c.append("path").datum({type:"Sphere"}).attr("class","water").attr("d",i);var l=d3.select(".globe").append("div").attr("class","countryTooltip"),d=d3.select(".select");queue().defer(d3.json,"src/data/world-110m.json").defer(d3.tsv,"src/data/world-110m-country-names.tsv").defer(d3.tsv,"src/data/aggregate-scores.tsv").defer(d3.tsv,"src/data/detail-scores.tsv").await(function(t,e,r,p,u){var f=["Afghanistan","Antartica","Bahamas","Brunei Darussalam","Burundi","Central African Republic","Cuba","Cyprus","Djibouti","Equatorial Guinea","Eritrea","Falkland Islands (Malvinas)","Fiji","French Southern Territories","Gabon","Gambia","Greenland","Guinea","Guinea-Bissau","Guyana","Haiti","Iceland","Iran, Islamic Republic of","Korea, Democratic People's Republic of","Kuwait","Libya","Luxembourg","New Caledonia","Oman","Palestinian Territory, Occupied","Papua New Guinea","Puerto Rico","Qatar","Solomon Islands","Somalia","South Sudan","Sudan","Suriname","Swaziland","Syrian Arab Republic","Taiwan, Province of China","Timor-Leste","Turkmenistan","United Arab Emirates","Uzbekistan","Vanatu","Western Sahara"],h={},v={},m={},g={},b=topojson.feature(e,e.objects.countries).features;r.forEach(function(t){m[t.id]=t.name,option=d.append("option"),option.text(t.name),option.property("value",t.id),p.forEach(function(t){"-"===t.percent?h[t.name]="-":h[t.name]=parseFloat(t.percent)/100}),r.forEach(function(t){v[t.id]=h[t.name]}),u.forEach(function(t){var e=[];e.push(t.a),e.push(t.b),e.push(t.c),e.push(t.d),e.push(t.e),g[t.name]=e})});var y={speed:.005,verticalTilt:-10,horizontalTilt:0},w=!1,x=0,A=function(t){return s.rotate([y.speed*(x+t)-120,y.verticalTilt,y.horizontalTilt]),c.selectAll("path").attr("d",i),w&&(x+=t),w};function P(){w=!0}d3.timer(A);e=c.selectAll("path.land").data(b).enter().append("path").attr("class","land").attr("d",i).each(function(t,e){"-"===v[t.id]||-99===t.id?(d3.select(this).style("fill","white"),console.log("setting color white")):d3.select(this).style("fill",o(v[t.id]))}).call(d3.behavior.drag().origin(function(){var t=s.rotate();return{x:t[0]/n,y:-t[1]/n}}).on("dragstart",function(){P()}).on("drag",function(){var t=s.rotate();s.rotate([d3.event.x*n,-d3.event.y*n,t[2]]),c.selectAll("path").attr("d",i),c.selectAll(".focused").classed("focused",!1),y.verticalTilt=-d3.event.y*n,y.horizontalTilt=t[2]}).on("dragend",function(){P()})).on("click",function(t){c.selectAll(".focused").classed("focused",!1),d3.select(this).attr("class","focused");var e=m[t.id];if(f.includes(e)){var n=d3.select("div.show-content-cont");n.selectAll("*").remove(),n.append("h1").text(m[t.id]).append("p").attr("class","no-data").text("Data has not been collected for this country in this study")}else{var r=[],o=["A","B","C","D","E"];g[e].forEach(function(t,e){"-"===t?r.push({name:"data not present",value:0}):r.push({name:o[e],value:parseFloat(t)/100})});var s=d3.select("div.show-content-cont");s.selectAll("*").remove(),s.append("h1").text(m[t.id]).append("p").attr("class","show-content-p").text("The Five Metrics:").append("p").attr("class","show-content-p").text("A: Proportion of women aged 20-24 years who were married or in a union before age 18").append("p").attr("class","show-content-p").text("B: Percentage of women (aged 15+ years) who agree that a husband is justified in beating his wife/partner under certain circumstances").append("p").attr("class","show-content-p").text("C: The extend to which there are legal grounds for abortion").append("p").attr("class","show-content-p").text("D: Proportion of seats held by women in national parliaments").append("p").attr("class","show-content-p").text("E: Proportion of ministerial/senior government positions held by women"),s.append("svg").attr("class","chart"),a(r)}}).on("mouseover",function(t){l.text(m[t.id]).style("left",d3.event.pageX+7+"px").style("top",d3.event.pageY-15+"px").style("display","block").style("opacity",1)}).on("mouseout",function(t){l.style("opacity",0).style("display","none")}).on("mousemove",function(t){l.style("left",d3.event.pageX+7+"px").style("top",d3.event.pageY-15+"px")});d3.select("select").on("change",function(){s.rotate();var t=function(t,e){for(var a=0,n=t.length;a<n;a++)if(t[a].id==e.value)return t[a]}(b,this),e=d3.geo.centroid(t),n=m[t.id];if(f.includes(n)){var r=d3.select("div.show-content-cont");r.selectAll("*").remove(),r.append("h1").text(m[t.id]).append("p").attr("class","no-data").text("Data has not been collected for this country in this study")}else{var o=[],l=["A","B","C","D","E"];g[n].forEach(function(t,e){"-"===t?o.push({name:"data not present",value:0}):o.push({name:l[e],value:parseFloat(t)/100})});var d=d3.select("div.show-content-cont");d.selectAll("*").remove(),d.append("h1").text(m[t.id]).append("p").attr("class","show-content-p").text("The Five Metrics:").append("p").attr("class","show-content-p").text("A: Proportion of women aged 20-24 years who were married or in a union before age 18").append("p").attr("class","show-content-p").text("B: Percentage of women (aged 15+ years) who agree that a husband is justified in beating his wife/partner under certain circumstances").append("p").attr("class","show-content-p").text("C: The extend to which there are legal grounds for abortion").append("p").attr("class","show-content-p").text("D: Proportion of seats held by women in national parliaments").append("p").attr("class","show-content-p").text("E: Proportion of ministerial/senior government positions held by women"),d.append("svg").attr("class","chart"),a(o)}c.selectAll(".focused").classed("focused",!1),d3.transition().duration(2500).tween("rotate",function(){var a=d3.interpolate(s.rotate(),[-e[0],-e[1]]);return function(e){s.rotate(a(e)),c.selectAll("path").attr("d",i).classed("focused",function(e,a){return e.id==t.id&&e})}}),P()})})},function(t,e,a){"use strict";a.r(e);a(0)}]);
//# sourceMappingURL=main.js.map